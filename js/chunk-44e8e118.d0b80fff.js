(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44e8e118"],{"604a":function(e,t,s){},"60f3":function(e,t,s){"use strict";s("604a")},d401:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("div",{staticClass:"handle-box"},[s("el-select",{staticClass:"handle-select mrb10",attrs:{placeholder:"用户类型"},model:{value:e.pagination.userType,callback:function(t){e.$set(e.pagination,"userType",t)},expression:"pagination.userType"}},[s("el-option",{key:"1",attrs:{label:"站长",value:0}}),s("el-option",{key:"2",attrs:{label:"管理员",value:1}}),s("el-option",{key:"3",attrs:{label:"普通用户",value:2}})],1),s("el-select",{staticClass:"handle-select mrb10",attrs:{placeholder:"用户状态"},model:{value:e.pagination.userStatus,callback:function(t){e.$set(e.pagination,"userStatus",t)},expression:"pagination.userStatus"}},[s("el-option",{key:"1",attrs:{label:"启用",value:!0}}),s("el-option",{key:"2",attrs:{label:"禁用",value:!1}})],1),s("el-input",{staticClass:"handle-input mrb10",attrs:{placeholder:"用户名/手机号/邮箱"},model:{value:e.pagination.searchKey,callback:function(t){e.$set(e.pagination,"searchKey",t)},expression:"pagination.searchKey"}}),s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.searchUser()}}},[e._v("搜索")]),s("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.clearSearch()}}},[e._v("清除参数")])],1),s("el-table",{staticClass:"table",attrs:{data:e.users,border:"","header-cell-class-name":"table-header"}},[s("el-table-column",{attrs:{prop:"id",label:"ID",width:"55",align:"center"}}),s("el-table-column",{attrs:{prop:"username",label:"用户名",align:"center"}}),s("el-table-column",{attrs:{prop:"phoneNumber",label:"手机号",align:"center"}}),s("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center"}}),s("el-table-column",{attrs:{label:"赞赏",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{size:"medium",maxlength:"30"},on:{blur:function(s){return e.changeUserAdmire(t.row)}},model:{value:t.row.admire,callback:function(s){e.$set(t.row,"admire",s)},expression:"scope.row.admire"}})]}}])}),s("el-table-column",{attrs:{label:"用户状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:!1===t.row.userStatus?"danger":"success","disable-transitions":""}},[e._v(" "+e._s(!1===t.row.userStatus?"禁用":"启用")+" ")]),t.row.id!==e.$store.state.currentAdmin.id?s("el-switch",{nativeOn:{click:function(s){return e.changeUserStatus(t.row)}},model:{value:t.row.userStatus,callback:function(s){e.$set(t.row,"userStatus",s)},expression:"scope.row.userStatus"}}):e._e()]}}])}),s("el-table-column",{attrs:{label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-image",{staticClass:"table-td-thumb",attrs:{lazy:"",src:e.row.avatar,fit:"cover"}})]}}])}),s("el-table-column",{attrs:{label:"性别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.gender?s("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v(" 男 ")]):2===t.row.gender?s("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v(" 女 ")]):s("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v(" 保密 ")])]}}])}),s("el-table-column",{attrs:{prop:"introduction",label:"简介",align:"center"}}),s("el-table-column",{attrs:{label:"用户类型",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.userType?s("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v(" 站长 ")]):1===t.row.userType?s("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"success","disable-transitions":""},nativeOn:{click:function(s){return e.editUser(t.row)}}},[e._v(" 管理员 ")]):s("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"success","disable-transitions":""},nativeOn:{click:function(s){return e.editUser(t.row)}}},[e._v(" 普通用户 ")])]}}])}),s("el-table-column",{attrs:{prop:"createTime",label:"注册时间",align:"center"}})],1),s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.pagination.current,"page-size":e.pagination.size,total:e.pagination.total},on:{"current-change":e.handlePageChange}})],1)],1),s("el-dialog",{attrs:{title:"修改用户类型",visible:e.editVisible,width:"30%","before-close":e.handleClose,"append-to-body":!0,"destroy-on-close":"",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[s("div",{staticClass:"myCenter"},[s("el-radio-group",{model:{value:e.changeUser.userType,callback:function(t){e.$set(e.changeUser,"userType",t)},expression:"changeUser.userType"}},[s("el-radio-button",{attrs:{label:1}},[e._v("管理员")]),s("el-radio-button",{attrs:{label:2}},[e._v("普通用户")])],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){return e.handleClose()}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveEdit()}}},[e._v("确 定")])],1)])],1)},n=[],r={data:function(){return{pagination:{current:1,size:10,total:0,searchKey:"",userStatus:null,userType:null},users:[],changeUser:{id:null,userType:null},editVisible:!1}},computed:{},watch:{},created:function(){this.getUsers()},mounted:function(){},methods:{clearSearch:function(){this.pagination={current:1,size:10,total:0,searchKey:"",userStatus:null,userType:null},this.getUsers()},getUsers:function(){var e=this;this.$http.post(this.$constant.baseURL+"/admin/user/list",this.pagination,!0).then((function(t){e.$common.isEmpty(t.data)||(e.users=t.data.records,e.pagination.total=t.data.total)})).catch((function(t){e.$message({message:t.message,type:"error"})}))},changeUserStatus:function(e){var t=this;this.$http.get(this.$constant.baseURL+"/admin/user/changeUserStatus",{userId:e.id,flag:e.userStatus},!0).then((function(e){t.$message({message:"修改成功！",type:"success"})})).catch((function(e){t.$message({message:e.message,type:"error"})}))},changeUserAdmire:function(e){var t=this;this.$common.isEmpty(e.admire)||this.$confirm("确认保存？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",center:!0}).then((function(){t.$http.get(t.$constant.baseURL+"/admin/user/changeUserAdmire",{userId:e.id,admire:e.admire},!0).then((function(e){t.$message({message:"修改成功！",type:"success"})})).catch((function(e){t.$message({message:e.message,type:"error"})}))})).catch((function(){t.$message({type:"success",message:"已取消保存!"})}))},editUser:function(e){this.changeUser.id=e.id,this.changeUser.userType=e.userType,this.editVisible=!0},handlePageChange:function(e){this.pagination.current=e,this.getUsers()},searchUser:function(){this.pagination.total=0,this.pagination.current=1,this.getUsers()},handleClose:function(){this.changeUser={id:null,userType:null},this.editVisible=!1},saveEdit:function(){var e=this;this.$http.get(this.$constant.baseURL+"/admin/user/changeUserType",{userId:this.changeUser.id,userType:this.changeUser.userType},!0).then((function(t){e.handleClose(),e.getUsers(),e.$message({message:"修改成功！",type:"success"})})).catch((function(t){e.$message({message:t.message,type:"error"})}))}}},i=r,l=(s("60f3"),s("2877")),o=Object(l["a"])(i,a,n,!1,null,"0cec19d5",null);t["default"]=o.exports}}]);