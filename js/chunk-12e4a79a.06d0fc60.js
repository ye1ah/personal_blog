(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12e4a79a"],{"1f7c":function(e,t,a){"use strict";a("c9de")},c9de:function(e,t,a){},ea6f:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select mrb10",attrs:{clearable:"",placeholder:"资源类型"},model:{value:e.pagination.resourceType,callback:function(t){e.$set(e.pagination,"resourceType",t)},expression:"pagination.resourceType"}},[a("el-option",{key:"21",attrs:{label:"Video.Article",value:"video/article"}}),a("el-option",{key:"20",attrs:{label:"公共资源",value:"assets"}}),a("el-option",{key:"10",attrs:{label:"表情包",value:"internetMeme"}}),a("el-option",{key:"1",attrs:{label:"用户头像",value:"userAvatar"}}),a("el-option",{key:"2",attrs:{label:"文章封面",value:"articleCover"}}),a("el-option",{key:"3",attrs:{label:"文章图片",value:"articlePicture"}}),a("el-option",{key:"5",attrs:{label:"网站头像",value:"webAvatar"}}),a("el-option",{key:"4",attrs:{label:"背景图片",value:"webBackgroundImage"}}),a("el-option",{key:"6",attrs:{label:"随机头像",value:"randomAvatar"}}),a("el-option",{key:"7",attrs:{label:"随机封面",value:"randomCover"}}),a("el-option",{key:"8",attrs:{label:"画笔图片",value:"graffiti"}}),a("el-option",{key:"9",attrs:{label:"评论图片",value:"commentPicture"}}),a("el-option",{key:"11",attrs:{label:"聊天群头像",value:"im/groupAvatar"}}),a("el-option",{key:"12",attrs:{label:"群聊天图片",value:"im/groupMessage"}}),a("el-option",{key:"13",attrs:{label:"朋友聊天图片",value:"im/friendMessage"}}),a("el-option",{key:"14",attrs:{label:"音乐声音",value:"funnyUrl"}}),a("el-option",{key:"15",attrs:{label:"音乐封面",value:"funnyCover"}}),a("el-option",{key:"16",attrs:{label:"Love.Cover",value:"love/bgCover"}}),a("el-option",{key:"17",attrs:{label:"Love.Man",value:"love/manCover"}}),a("el-option",{key:"18",attrs:{label:"Love.Woman",value:"love/womanCover"}}),a("el-option",{key:"19",attrs:{label:"收藏夹封面",value:"favoritesCover"}})],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addResources()}}},[e._v("新增资源")])],1),a("el-table",{staticClass:"table",attrs:{data:e.resources,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"originalName",label:"名称",align:"center"}}),a("el-table-column",{attrs:{prop:"userId",label:"用户ID",align:"center"}}),a("el-table-column",{attrs:{prop:"type",label:"资源类型",align:"center"}}),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:!1===t.row.status?"danger":"success","disable-transitions":""}},[e._v(" "+e._s(!1===t.row.status?"禁用":"启用")+" ")]),a("el-switch",{nativeOn:{click:function(a){return e.changeStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{attrs:{label:"路径",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[!e.$common.isEmpty(t.row.mimeType)&&t.row.mimeType.includes("image")?[a("el-image",{staticClass:"table-td-thumb",attrs:{lazy:"","preview-src-list":[t.row.path],src:t.row.path,fit:"cover"}})]:[e._v(" "+e._s(t.row.path)+" ")]]}}])}),a("el-table-column",{attrs:{label:"大小(KB)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(Math.round(t.row.size/1024))+" ")]}}])}),a("el-table-column",{attrs:{prop:"mimeType",label:"类型",align:"center"}}),a("el-table-column",{attrs:{prop:"storeType",label:"存储平台",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"var(--orangeRed)"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v(" 删除 ")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.pagination.current,"page-size":e.pagination.size,total:e.pagination.total},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"文件",visible:e.resourceDialog,width:"25%","append-to-body":!0,"close-on-click-modal":!1,"destroy-on-close":"",center:""},on:{"update:visible":function(t){e.resourceDialog=t}}},[a("div",[a("div",{staticStyle:{display:"flex","margin-bottom":"10px"}},[a("div",{staticStyle:{"line-height":"40px"}},[e._v("存储平台：")]),a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"存储平台"},model:{value:e.storeType,callback:function(t){e.storeType=t},expression:"storeType"}},e._l(e.storeTypes,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("uploadPicture",{attrs:{isAdmin:!0,prefix:e.pagination.resourceType,storeType:e.storeType,listType:"text",accept:"image/*, video/*, audio/*",maxSize:100,maxNumber:10},on:{addPicture:e.addFile}})],1)])],1)},o=[],n=(a("d3b7"),a("3ca3"),a("ddb0"),function(){return a.e("chunk-4279e0f6").then(a.bind(null,"6034"))}),s={components:{uploadPicture:n},data:function(){return{pagination:{current:1,size:10,total:0,resourceType:""},resources:[],resourceDialog:!1,storeTypes:[{label:"服务器",value:"local"},{label:"七牛云",value:"qiniu"}],storeType:localStorage.getItem("defaultStoreType")}},computed:{},watch:{},created:function(){this.getResources()},mounted:function(){},methods:{handleDelete:function(e){var t=this;this.$confirm("确认删除资源？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",center:!0}).then((function(){t.$http.post(t.$constant.baseURL+"/resource/deleteResource",{path:e.path},!0,!1).then((function(e){t.pagination.current=1,t.getResources(),t.$message({message:"删除成功！",type:"success"})})).catch((function(e){t.$message({message:e.message,type:"error"})}))})).catch((function(){t.$message({type:"success",message:"已取消删除!"})}))},addFile:function(e){},addResources:function(){this.$common.isEmpty(this.pagination.resourceType)?this.$message({message:"请选择资源类型！",type:"error"}):this.resourceDialog=!0},search:function(){this.pagination.total=0,this.pagination.current=1,this.getResources()},getResources:function(){var e=this;this.$http.post(this.$constant.baseURL+"/resource/listResource",this.pagination,!0).then((function(t){e.$common.isEmpty(t.data)||(e.resources=t.data.records,e.pagination.total=t.data.total)})).catch((function(t){e.$message({message:t.message,type:"error"})}))},changeStatus:function(e){var t=this;this.$http.get(this.$constant.baseURL+"/resource/changeResourceStatus",{id:e.id,flag:e.status},!0).then((function(e){t.$message({message:"修改成功！",type:"success"})})).catch((function(e){t.$message({message:e.message,type:"error"})}))},handlePageChange:function(e){this.pagination.current=e,this.getResources()}}},r=s,i=(a("1f7c"),a("2877")),c=Object(i["a"])(r,l,o,!1,null,"57732882",null);t["default"]=c.exports}}]);